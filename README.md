# MCP WORKSHOP

![GitHub release (latest by date)](https://img.shields.io/github/v/release/SeanPlusPlus/mcp-workshop?label=release)

Welcome to the **Model Context Protocol (MCP) Workshop**! This is a live, iterative tutorial between me (Sean) and ChatGPT â€” building understanding from first principles and implementing a conceptual prototype in JavaScript step by step.

## ğŸš€ Goal

Learn and build a conceptual prototype of the Model Context Protocol (MCP) using JavaScript. Weâ€™ll simulate how LLMs can interact with tools, external data sources, and memory through a structured protocol.

## ğŸ“¦ Versions

ğŸ‘‰ [View latest GitHub release](https://github.com/SeanPlusPlus/mcp-workshop/releases/latest)

### âœ… Version 1.0.0 (Locked)

To check out the original minimal working prototype:

```bash
git checkout v1.0.0
```

Covered in v1:

- Static regex-based tool detection
- Dynamic tool registry (`registry.js`)
- Tools: `calculator`, `time`, `diceRoll`
- Zod-based schema validation for input/output
- Structured tool invocation responses
- CLI for listing tools: `npm run tools`
- Logging and tracing of tool usage

---

### âœ… Version 2.0.0

To explore v2:

```bash
git checkout main
npm install
npm start
```

Added in v2:

- ğŸ§  `planTool()` uses GPT-4 to route user prompts to tools
- ğŸ§ª `scripts/testPlanner.js` lets you try LLM-driven planning via `npm run plan`
- ğŸ§° `handleMessage()` falls back to the LLM if no tool is matched
- ğŸ” Tool output is passed back to GPT-4 via `finalReply()`
- ğŸ’¬ Final user-facing response is generated by the LLM

v2 completes the full reasoning loop:  
**LLM â†’ tool â†’ LLM**

---

### âœ… Version 3.0.0

```bash
git checkout main
npm install
npm run agent
```

New in v3:

- Introduced mcp-agent.js, the core LLM â†’ Tool â†’ Output runner
- Automatically plans which tool to use via GPT-4
- Invokes and validates tool output using Zod
- Script name: `npm run agent`

---

## ğŸ“š What is MCP?

MCP (Model Context Protocol) is an open standard introduced by Anthropic in November 2024. It provides a structured way for LLMs to:

- Access and query external tools
- Retrieve and store context
- Compose workflows involving multiple steps
- Maintain a consistent schema for structured communication

## ğŸ§  Key Concepts Weâ€™ll Explore

- Messages and structured communication
- Tool use and invocation
- External context (retrieval, storage, reasoning)
- Schema design
- Simulated agents and tool responses

## ğŸ›  Stack

Weâ€™ll use:

- JavaScript (Node.js)
- JSON for message structure
- Zod for schema validation
- OpenAIâ€™s GPT-4 for planning
- Simple local mocks for tools and memory

## ğŸ§© Structure

- `src/`
  - `index.js` â€” Entry point for the workshop
  - `messages/` â€” Simulated message handling and agent logic
  - `tools/` â€” Mock external tools (e.g., calculator, time, dice, registry)
  - `llm/` â€” Planner + final response generation using OpenAI
  - `memory/` â€” Contextual storage/retrieval (TBD)
  - `schemas/` â€” Definitions for message formats (TBD)
  - `tracing/` â€” Logs structured tool usage to simulate MCP-style traceability
- `scripts/`
  - `listTools.js` â€” Lists available tool cards
  - `testPlanner.js` â€” Interactively test LLM tool planning via CLI
- `.env` â€” Holds your `OPENAI_API_KEY`
- `README.md` â€” This file

## ğŸ How to Start

```bash
npm install
npm start
```

To list available tools:

```bash
npm run tools
```

To test LLM tool planning:

```bash
npm run plan
```

---

## ğŸ§¾ Milestones and Feature Summary

### ğŸ›  v1.0.0 Foundation

- âœ… Created `README.md`
- âœ… Set up ESLint and Prettier (2-space, no semicolons, format-on-save)
- âœ… Built initial tool invocation system using regex-based matching
- âœ… Designed dynamic `toolRegistry.js` with `name`, `match`, `handler`
- âœ… Built first tools: `calculator`, `time`, `diceRoll`
- âœ… Added CLI tool list: `npm run tools`
- âœ… Added tool logging via `trace.js`
- âœ… Introduced Zod validation for input/output schemas
- âœ… Refactored `handleMessage()` to invoke tools via registry
- âœ… CLI-driven test suite via `index.js` messages
- âœ… Tagged and released as `v1.0.0`

### ğŸ¤– v2.0.0 Agent Upgrade

- âœ… Introduced GPT-4-based planner: `planTool.js`
- âœ… Created CLI script: `npm run plan` to test LLM tool routing
- âœ… Fallback to LLM planning in `handleMessage()` when no tool matches
- âœ… Created `finalReply.js` to turn tool result into natural language
- âœ… Completed full loop: **LLM â†’ tool â†’ LLM reply**
- âœ… Updated all messages to return human-facing responses from the model
- âœ… Updated README, tagged and ready for `v2.0.0`

### â­ï¸ Next Ideas

- Add memory context or conversation history
- Support multiple tool calls in a single turn
- Use system-level planning instructions
- Make planner LLM aware of prior tool results or facts
